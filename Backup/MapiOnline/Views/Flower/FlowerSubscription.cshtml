@model MapiOnline.Models.CategoryItemsModel
@{
    ViewBag.Title = "اشتراک گل";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="../../Scripts/fcal.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        loadFlowerSubscription();
    });
</script>
<div class="header">
    <div class="dots">
        <h2>
            <span>اشتراک گل</span>
        </h2>
    </div>
</div>
<div class="news_box_left" align="center" style="margin-right: 0; padding-right: 2px;
    padding-left: 2px;">
    <div align="center" style="margin-right: 0;">
        @using (Html.BeginForm())
        {
            <div align="center" style="font-size: 12.5px; font-family: tahoma; color: #002F00;
                font-weight: bold;">
                انتخاب نوع و تعداد شاخه گل ها</div>
            <div id="flowersDiv" class="cleaner" style="margin-right: 0;">
                @for (int i = 0; i < Model.Items.Count; i++)
                {
                    var item = Model.Items[i];
                    <table style="margin-right: 0;">
                        <tr>
                            <td>
                                <div name='proBox' class='flower_box' style='position: relative; width: 162px!important;
                                    height: 260px!important; margin: 10px 3px 3px 0;'>
                                    <div class='cursor' name='img_proName' id='img@(item.BarcodeId)'>
                                        <a href="@Url.Action("ProductDetails", "Home", new
                                                        {
                                                            productId = @item.BarcodeId,
                                                            categoryId = Request["categoryId"],
                                                            technicalInfo = false,
                                                            isNew = Request["isNew"],
                                                            isOffer = Request["isOffer"],
                                                            isSale = Request["isSale"]
                                                        })">
                                            <img class='flowerImg cleaner' src='../Data/@(item.aspnet_Applications.ApplicationName)Photos/@(item.Barcode)/thumb_1.jpg' alt='@item.Name' title='@item.Name' style="border: none; width:150px!important;height:150px!important;"/>
                                        </a>
                                    </div>
                                    <h3 id="hFlowerName" class='name cleaner'>@item.Name کد @item.ItemCode</h3>
                                    <div class='price cleaner' id='price@(item.BarcodeId)' style ="padding:0!important;">
                                        @if (Model.HasWholeRole != true && Model.hasFriendRole != true)
                                        {
                                            if (item.IsSale == true && item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span style="text-decoration: line-through; margin-left: 5px; color: #FF0000;">
                                                @if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault() != null)
                                                {
                                                    @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Online)
                                                    <span>&nbsp;تومان</span>
                                                }
                                            </span>
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size != null && it.inv_Size.Count > 0))
                                            {
                                            <div id="price@(item.BarcodeId)" class="price" style="padding:0!important;">
                                                <span id="Qualities">
                                                    @{int counter = 1;
                                                      foreach (var size in item.inv_ItemDetail.Where(s => s.inv_Size.FirstOrDefault().inv_Size2.Size == "کیفیت"))
                                                      {
                                                        <label style="font-size: 9px!important; margin-left: 0!important; margin-right: 0!important;">
                                                            <input style="margin:0!important;" type="radio" 
                                                                value="@(Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online) + Convert.ToInt32(size.DetailPrice))" 
                                                                name="Qualities@(item.BarcodeId)" id="Quality@(counter)" sizeId="sizeId@(size.inv_Size.FirstOrDefault().SizeId)" />
                                                            @(size.inv_Size.FirstOrDefault().Size)&nbsp;</label>
                                                        counter++;
                                                      }
                                                    }
                                                </span>
                                                <br>
                                                <span id="qprice@(item.BarcodeId)" name="itemprice"></span><span>&nbsp;تومان</span>
                                            </div>
                                            }
                                        }
                                        else if (Model.HasWholeRole == true)
                                        {
                                            if (item.IsSale == true && item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span style="text-decoration: line-through; margin-left: 5px; color: #FF0000;">
                                                @if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault() != null)
                                                {
                                                    if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Wholesale > 0)
                                                    {
                                                    @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Wholesale)
                                                    <span>&nbsp;تومان</span>
                                                    }
                                                }
                                            </span>
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size != null && it.inv_Size.Count > 0))
                                            {
                                            <div id="price@(item.BarcodeId)" class="price">
                                                <span id="Qualities">
                                                    @{int counter = 1;
                                                      foreach (var size in item.inv_ItemDetail.Where(s => s.inv_Size.FirstOrDefault().inv_Size2.Size == "کیفیت"))
                                                      {
                                                        <label style="font-size: 9px!important; margin-left: 0!important; margin-right: 0!important;">
                                                            <input style="margin:0!important;" type="radio" 
                                                                value="@(Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale) + Convert.ToInt32(size.DetailPrice))" 
                                                                name="Qualities@(item.BarcodeId)" id="Quality@(counter)" sizeId="@(size.inv_Size.FirstOrDefault().SizeId)" />
                                                            @(size.inv_Size.FirstOrDefault().Size)&nbsp;</label>
                                                        counter++;
                                                      }
                                                    }
                                                </span>
                                                <br />
                                                <span id="qprice@(item.BarcodeId)" name="itemprice"></span><span>&nbsp;تومان</span>
                                            </div>
                                            }
                                        }
                                        else if (Model.hasFriendRole == true)
                                        {
                                            if (item.IsSale == true && item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span style="text-decoration: line-through; margin-left: 5px; color: #FF0000;">
                                                @if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault() != null)
                                                {
                                                    if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Freinds > 0)
                                                    {
                                                    @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Freinds)
                                                    <span>&nbsp;تومان</span>
                                                    }
                                                }
                                            </span>
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size != null && it.inv_Size.Count > 0))
                                            {
                                            <div id="price@(item.BarcodeId)" class="price">
                                                <span id="Qualities">
                                                    @{int counter = 1;
                                                      foreach (var size in item.inv_ItemDetail.Where(s => s.inv_Size.FirstOrDefault().inv_Size2.Size == "کیفیت"))
                                                      {
                                                        <label style="font-size: 9px!important; margin-left: 0!important; margin-right: 0!important;">
                                                            <input style="margin:0!important;" type="radio" 
                                                                value="@(Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds) + Convert.ToInt32(size.DetailPrice))" 
                                                                name="Qualities@(item.BarcodeId)" id="Quality@(counter)" sizeId="@(size.inv_Size.FirstOrDefault().SizeId)" />
                                                            @(size.inv_Size.FirstOrDefault().Size)&nbsp;</label>
                                                        counter++;
                                                      }
                                                    }
                                                </span>
                                                <br />
                                                <span id="qprice@(item.BarcodeId)" name="itemprice"></span><span>&nbsp;تومان</span>
                                            </div>
                                            }
                                        }
                                    </div>
                                    <div style="margin-bottom: 10px">
                                        @if (item.inv_ItemDetail.Count > 0)
                                        {
                                            <label style="margin-left: 5px">
                                                تعداد</label>
                                            <select style="width: 50px" id="count@(item.inv_ItemDetail.FirstOrDefault().ItemDetailId)" name="countDdl">
                                                @for (int c = 0; c < 51; c++)
                                                {
                                                    <option>@c</option>
                                                }
                                            </select>
                                        }
                                    </div>
                                    @*<div class='buynow'>
                                                <span class='cursor' id='ord@(item.BarcodeId)' name='order'>&nbsp;اضافه به سبد خرید</span>
                                            </div>*@
                                </div>
                            </td>
                            @{
                                        i++;
                                        if (i < Model.Items.Count)
                                        {
                                            item = Model.Items[i];
                                <td>
                                    <div name='proBox' class='flower_box' style='position: relative; width: 162px!important;
                                    height: 260px!important; margin: 10px 3px 3px 0;'>
                                    <div class='cursor' name='img_proName' id='img@(item.BarcodeId)'>
                                        <a href="@Url.Action("ProductDetails", "Home", new
                                                        {
                                                            productId = @item.BarcodeId,
                                                            categoryId = Request["categoryId"],
                                                            technicalInfo = false,
                                                            isNew = Request["isNew"],
                                                            isOffer = Request["isOffer"],
                                                            isSale = Request["isSale"]
                                                        })">
                                            <img class='flowerImg cleaner' src='../Data/@(item.aspnet_Applications.ApplicationName)Photos/@(item.Barcode)/thumb_1.jpg' alt='@item.Name' title='@item.Name' style="border: none; width:150px!important;height:150px!important;"/>
                                        </a>
                                    </div>
                                    <h3 id="hFlowerName" class='name cleaner'>@item.Name کد @item.ItemCode</h3>
                                    <div class='price cleaner' id='price@(item.BarcodeId)' style ="padding:0!important;">
                                        @if (Model.HasWholeRole != true && Model.hasFriendRole != true)
                                        {
                                            if (item.IsSale == true && item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span style="text-decoration: line-through; margin-left: 5px; color: #FF0000;">
                                                @if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault() != null)
                                                {
                                                    @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Online)
                                                    <span>&nbsp;تومان</span>
                                                }
                                            </span>
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size != null && it.inv_Size.Count > 0))
                                            {
                                            <div id="price@(item.BarcodeId)" class="price" style="padding:0!important;">
                                                <span id="Qualities">
                                                    @{int counter = 1;
                                                      foreach (var size in item.inv_ItemDetail.Where(s => s.inv_Size.FirstOrDefault().inv_Size2.Size == "کیفیت"))
                                                      {
                                                        <label style="font-size: 9px!important; margin-left: 0!important; margin-right: 0!important;">
                                                            <input style="margin:0!important;" type="radio" 
                                                                value="@(Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online) + Convert.ToInt32(size.DetailPrice))" 
                                                                name="Qualities@(item.BarcodeId)" id="Quality@(counter)" sizeId="sizeId@(size.inv_Size.FirstOrDefault().SizeId)" />
                                                            @(size.inv_Size.FirstOrDefault().Size)&nbsp;</label>
                                                        counter++;
                                                      }
                                                    }
                                                </span>
                                                <br>
                                                <span id="qprice@(item.BarcodeId)" name="itemprice"></span><span>&nbsp;تومان</span>
                                            </div>
                                            }
                                        }
                                        else if (Model.HasWholeRole == true)
                                        {
                                            if (item.IsSale == true && item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span style="text-decoration: line-through; margin-left: 5px; color: #FF0000;">
                                                @if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault() != null)
                                                {
                                                    if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Wholesale > 0)
                                                    {
                                                    @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Wholesale)
                                                    <span>&nbsp;تومان</span>
                                                    }
                                                }
                                            </span>
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size != null && it.inv_Size.Count > 0))
                                            {
                                            <div id="price@(item.BarcodeId)" class="price">
                                                <span id="Qualities">
                                                    @{int counter = 1;
                                                      foreach (var size in item.inv_ItemDetail.Where(s => s.inv_Size.FirstOrDefault().inv_Size2.Size == "کیفیت"))
                                                      {
                                                        <label style="font-size: 9px!important; margin-left: 0!important; margin-right: 0!important;">
                                                            <input style="margin:0!important;" type="radio" 
                                                                value="@(Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale) + Convert.ToInt32(size.DetailPrice))" 
                                                                name="Qualities@(item.BarcodeId)" id="Quality@(counter)" sizeId="@(size.inv_Size.FirstOrDefault().SizeId)" />
                                                            @(size.inv_Size.FirstOrDefault().Size)&nbsp;</label>
                                                        counter++;
                                                      }
                                                    }
                                                </span>
                                                <br />
                                                <span id="qprice@(item.BarcodeId)" name="itemprice"></span><span>&nbsp;تومان</span>
                                            </div>
                                            }
                                        }
                                        else if (Model.hasFriendRole == true)
                                        {
                                            if (item.IsSale == true && item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span style="text-decoration: line-through; margin-left: 5px; color: #FF0000;">
                                                @if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault() != null)
                                                {
                                                    if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Freinds > 0)
                                                    {
                                                    @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Freinds)
                                                    <span>&nbsp;تومان</span>
                                                    }
                                                }
                                            </span>
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size != null && it.inv_Size.Count > 0))
                                            {
                                            <div id="price@(item.BarcodeId)" class="price">
                                                <span id="Qualities">
                                                    @{int counter = 1;
                                                      foreach (var size in item.inv_ItemDetail.Where(s => s.inv_Size.FirstOrDefault().inv_Size2.Size == "کیفیت"))
                                                      {
                                                        <label style="font-size: 9px!important; margin-left: 0!important; margin-right: 0!important;">
                                                            <input style="margin:0!important;" type="radio" 
                                                                value="@(Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds) + Convert.ToInt32(size.DetailPrice))" 
                                                                name="Qualities@(item.BarcodeId)" id="Quality@(counter)" sizeId="@(size.inv_Size.FirstOrDefault().SizeId)" />
                                                            @(size.inv_Size.FirstOrDefault().Size)&nbsp;</label>
                                                        counter++;
                                                      }
                                                    }
                                                </span>
                                                <br />
                                                <span id="qprice@(item.BarcodeId)" name="itemprice"></span><span>&nbsp;تومان</span>
                                            </div>
                                            }
                                        }
                                    </div>
                                    <div style="margin-bottom: 10px">
                                        @if (item.inv_ItemDetail.Count > 0)
                                        {
                                            <label style="margin-left: 5px">
                                                تعداد</label>
                                            <select style="width: 50px" id="count@(item.inv_ItemDetail.FirstOrDefault().ItemDetailId)" name="countDdl">
                                                @for (int c = 0; c < 51; c++)
                                                {
                                                    <option>@c</option>
                                                }
                                            </select>
                                        }
                                    </div>
                                    @*<div class='buynow'>
                                                <span class='cursor' id='ord@(item.BarcodeId)' name='order'>&nbsp;اضافه به سبد خرید</span>
                                            </div>*@
                                </div>
                                </td>
                                        }
                            }
                            @{
                                        i++;
                                        if (i < Model.Items.Count)
                                        {
                                            item = Model.Items[i];
                                <td>
                                   <div name='proBox' class='flower_box' style='position: relative; width: 162px!important;
                                    height: 260px!important; margin: 10px 3px 3px 0;'>
                                    <div class='cursor' name='img_proName' id='img@(item.BarcodeId)'>
                                        <a href="@Url.Action("ProductDetails", "Home", new
                                                        {
                                                            productId = @item.BarcodeId,
                                                            categoryId = Request["categoryId"],
                                                            technicalInfo = false,
                                                            isNew = Request["isNew"],
                                                            isOffer = Request["isOffer"],
                                                            isSale = Request["isSale"]
                                                        })">
                                            <img class='flowerImg cleaner' src='../Data/@(item.aspnet_Applications.ApplicationName)Photos/@(item.Barcode)/thumb_1.jpg' alt='@item.Name' title='@item.Name' style="border: none; width:150px!important;height:150px!important;"/>
                                        </a>
                                    </div>
                                    <h3 id="hFlowerName" class='name cleaner'>@item.Name کد @item.ItemCode</h3>
                                    <div class='price cleaner' id='price@(item.BarcodeId)' style ="padding:0!important;">
                                        @if (Model.HasWholeRole != true && Model.hasFriendRole != true)
                                        {
                                            if (item.IsSale == true && item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span style="text-decoration: line-through; margin-left: 5px; color: #FF0000;">
                                                @if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault() != null)
                                                {
                                                    @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Online)
                                                    <span>&nbsp;تومان</span>
                                                }
                                            </span>
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size != null && it.inv_Size.Count > 0))
                                            {
                                            <div id="price@(item.BarcodeId)" class="price" style="padding:0!important;">
                                                <span id="Qualities">
                                                    @{int counter = 1;
                                                      foreach (var size in item.inv_ItemDetail.Where(s => s.inv_Size.FirstOrDefault().inv_Size2.Size == "کیفیت"))
                                                      {
                                                        <label style="font-size: 9px!important; margin-left: 0!important; margin-right: 0!important;">
                                                            <input style="margin:0!important;" type="radio" 
                                                                value="@(Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online) + Convert.ToInt32(size.DetailPrice))" 
                                                                name="Qualities@(item.BarcodeId)" id="Quality@(counter)" sizeId="sizeId@(size.inv_Size.FirstOrDefault().SizeId)" />
                                                            @(size.inv_Size.FirstOrDefault().Size)&nbsp;</label>
                                                        counter++;
                                                      }
                                                    }
                                                </span>
                                                <br>
                                                <span id="qprice@(item.BarcodeId)" name="itemprice"></span><span>&nbsp;تومان</span>
                                            </div>
                                            }
                                        }
                                        else if (Model.HasWholeRole == true)
                                        {
                                            if (item.IsSale == true && item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span style="text-decoration: line-through; margin-left: 5px; color: #FF0000;">
                                                @if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault() != null)
                                                {
                                                    if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Wholesale > 0)
                                                    {
                                                    @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Wholesale)
                                                    <span>&nbsp;تومان</span>
                                                    }
                                                }
                                            </span>
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size != null && it.inv_Size.Count > 0))
                                            {
                                            <div id="price@(item.BarcodeId)" class="price">
                                                <span id="Qualities">
                                                    @{int counter = 1;
                                                      foreach (var size in item.inv_ItemDetail.Where(s => s.inv_Size.FirstOrDefault().inv_Size2.Size == "کیفیت"))
                                                      {
                                                        <label style="font-size: 9px!important; margin-left: 0!important; margin-right: 0!important;">
                                                            <input style="margin:0!important;" type="radio" 
                                                                value="@(Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale) + Convert.ToInt32(size.DetailPrice))" 
                                                                name="Qualities@(item.BarcodeId)" id="Quality@(counter)" sizeId="@(size.inv_Size.FirstOrDefault().SizeId)" />
                                                            @(size.inv_Size.FirstOrDefault().Size)&nbsp;</label>
                                                        counter++;
                                                      }
                                                    }
                                                </span>
                                                <br />
                                                <span id="qprice@(item.BarcodeId)" name="itemprice"></span><span>&nbsp;تومان</span>
                                            </div>
                                            }
                                        }
                                        else if (Model.hasFriendRole == true)
                                        {
                                            if (item.IsSale == true && item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span style="text-decoration: line-through; margin-left: 5px; color: #FF0000;">
                                                @if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault() != null)
                                                {
                                                    if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Freinds > 0)
                                                    {
                                                    @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Freinds)
                                                    <span>&nbsp;تومان</span>
                                                    }
                                                }
                                            </span>
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size != null && it.inv_Size.Count > 0))
                                            {
                                            <div id="price@(item.BarcodeId)" class="price">
                                                <span id="Qualities">
                                                    @{int counter = 1;
                                                      foreach (var size in item.inv_ItemDetail.Where(s => s.inv_Size.FirstOrDefault().inv_Size2.Size == "کیفیت"))
                                                      {
                                                        <label style="font-size: 9px!important; margin-left: 0!important; margin-right: 0!important;">
                                                            <input style="margin:0!important;" type="radio" 
                                                                value="@(Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds) + Convert.ToInt32(size.DetailPrice))" 
                                                                name="Qualities@(item.BarcodeId)" id="Quality@(counter)" sizeId="@(size.inv_Size.FirstOrDefault().SizeId)" />
                                                            @(size.inv_Size.FirstOrDefault().Size)&nbsp;</label>
                                                        counter++;
                                                      }
                                                    }
                                                </span>
                                                <br />
                                                <span id="qprice@(item.BarcodeId)" name="itemprice"></span><span>&nbsp;تومان</span>
                                            </div>
                                            }
                                        }
                                    </div>
                                    <div style="margin-bottom: 10px">
                                        @if (item.inv_ItemDetail.Count > 0)
                                        {
                                            <label style="margin-left: 5px">
                                                تعداد</label>
                                            <select style="width: 50px" id="count@(item.inv_ItemDetail.FirstOrDefault().ItemDetailId)" name="countDdl">
                                                @for (int c = 0; c < 51; c++)
                                                {
                                                    <option>@c</option>
                                                }
                                            </select>
                                        }
                                    </div>
                                    @*<div class='buynow'>
                                                <span class='cursor' id='ord@(item.BarcodeId)' name='order'>&nbsp;اضافه به سبد خرید</span>
                                            </div>*@
                                </div>
                                </td>
                                        }
                            }
                            @{
                                        i++;
                                        if (i < Model.Items.Count)
                                        {
                                            item = Model.Items[i];
                                <td>
                                   <div name='proBox' class='flower_box' style='position: relative; width: 162px!important;
                                    height: 260px!important; margin: 10px 3px 3px 0;'>
                                    <div class='cursor' name='img_proName' id='img@(item.BarcodeId)'>
                                        <a href="@Url.Action("ProductDetails", "Home", new
                                                        {
                                                            productId = @item.BarcodeId,
                                                            categoryId = Request["categoryId"],
                                                            technicalInfo = false,
                                                            isNew = Request["isNew"],
                                                            isOffer = Request["isOffer"],
                                                            isSale = Request["isSale"]
                                                        })">
                                            <img class='flowerImg cleaner' src='../Data/@(item.aspnet_Applications.ApplicationName)Photos/@(item.Barcode)/thumb_1.jpg' alt='@item.Name' title='@item.Name' style="border: none; width:150px!important;height:150px!important;"/>
                                        </a>
                                    </div>
                                    <h3 id="hFlowerName" class='name cleaner'>@item.Name کد @item.ItemCode</h3>
                                    <div class='price cleaner' id='price@(item.BarcodeId)' style ="padding:0!important;">
                                        @if (Model.HasWholeRole != true && Model.hasFriendRole != true)
                                        {
                                            if (item.IsSale == true && item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span style="text-decoration: line-through; margin-left: 5px; color: #FF0000;">
                                                @if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault() != null)
                                                {
                                                    @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Online)
                                                    <span>&nbsp;تومان</span>
                                                }
                                            </span>
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size != null && it.inv_Size.Count > 0))
                                            {
                                            <div id="price@(item.BarcodeId)" class="price" style="padding:0!important;">
                                                <span id="Qualities">
                                                    @{int counter = 1;
                                                      foreach (var size in item.inv_ItemDetail.Where(s => s.inv_Size.FirstOrDefault().inv_Size2.Size == "کیفیت"))
                                                      {
                                                        <label style="font-size: 9px!important; margin-left: 0!important; margin-right: 0!important;">
                                                            <input style="margin:0!important;" type="radio" 
                                                                value="@(Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online) + Convert.ToInt32(size.DetailPrice))" 
                                                                name="Qualities@(item.BarcodeId)" id="Quality@(counter)" sizeId="sizeId@(size.inv_Size.FirstOrDefault().SizeId)" />
                                                            @(size.inv_Size.FirstOrDefault().Size)&nbsp;</label>
                                                        counter++;
                                                      }
                                                    }
                                                </span>
                                                <br>
                                                <span id="qprice@(item.BarcodeId)" name="itemprice"></span><span>&nbsp;تومان</span>
                                            </div>
                                            }
                                        }
                                        else if (Model.HasWholeRole == true)
                                        {
                                            if (item.IsSale == true && item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span style="text-decoration: line-through; margin-left: 5px; color: #FF0000;">
                                                @if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault() != null)
                                                {
                                                    if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Wholesale > 0)
                                                    {
                                                    @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Wholesale)
                                                    <span>&nbsp;تومان</span>
                                                    }
                                                }
                                            </span>
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size != null && it.inv_Size.Count > 0))
                                            {
                                            <div id="price@(item.BarcodeId)" class="price">
                                                <span id="Qualities">
                                                    @{int counter = 1;
                                                      foreach (var size in item.inv_ItemDetail.Where(s => s.inv_Size.FirstOrDefault().inv_Size2.Size == "کیفیت"))
                                                      {
                                                        <label style="font-size: 9px!important; margin-left: 0!important; margin-right: 0!important;">
                                                            <input style="margin:0!important;" type="radio" 
                                                                value="@(Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale) + Convert.ToInt32(size.DetailPrice))" 
                                                                name="Qualities@(item.BarcodeId)" id="Quality@(counter)" sizeId="@(size.inv_Size.FirstOrDefault().SizeId)" />
                                                            @(size.inv_Size.FirstOrDefault().Size)&nbsp;</label>
                                                        counter++;
                                                      }
                                                    }
                                                </span>
                                                <br />
                                                <span id="qprice@(item.BarcodeId)" name="itemprice"></span><span>&nbsp;تومان</span>
                                            </div>
                                            }
                                        }
                                        else if (Model.hasFriendRole == true)
                                        {
                                            if (item.IsSale == true && item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span style="text-decoration: line-through; margin-left: 5px; color: #FF0000;">
                                                @if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault() != null)
                                                {
                                                    if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Freinds > 0)
                                                    {
                                                    @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Freinds)
                                                    <span>&nbsp;تومان</span>
                                                    }
                                                }
                                            </span>
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size != null && it.inv_Size.Count > 0))
                                            {
                                            <div id="price@(item.BarcodeId)" class="price">
                                                <span id="Qualities">
                                                    @{int counter = 1;
                                                      foreach (var size in item.inv_ItemDetail.Where(s => s.inv_Size.FirstOrDefault().inv_Size2.Size == "کیفیت"))
                                                      {
                                                        <label style="font-size: 9px!important; margin-left: 0!important; margin-right: 0!important;">
                                                            <input style="margin:0!important;" type="radio" 
                                                                value="@(Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds) + Convert.ToInt32(size.DetailPrice))" 
                                                                name="Qualities@(item.BarcodeId)" id="Quality@(counter)" sizeId="@(size.inv_Size.FirstOrDefault().SizeId)" />
                                                            @(size.inv_Size.FirstOrDefault().Size)&nbsp;</label>
                                                        counter++;
                                                      }
                                                    }
                                                </span>
                                                <br />
                                                <span id="qprice@(item.BarcodeId)" name="itemprice"></span><span>&nbsp;تومان</span>
                                            </div>
                                            }
                                        }
                                    </div>
                                    <div style="margin-bottom: 10px">
                                        @if (item.inv_ItemDetail.Count > 0)
                                        {
                                            <label style="margin-left: 5px">
                                                تعداد</label>
                                            <select style="width: 50px" id="count@(item.inv_ItemDetail.FirstOrDefault().ItemDetailId)" name="countDdl">
                                                @for (int c = 0; c < 51; c++)
                                                {
                                                    <option>@c</option>
                                                }
                                            </select>
                                        }
                                    </div>
                                    @*<div class='buynow'>
                                                <span class='cursor' id='ord@(item.BarcodeId)' name='order'>&nbsp;اضافه به سبد خرید</span>
                                            </div>*@
                                </div>
                                </td>
                                        }
                            }
                            @{
                                        i++;
                                        if (i < Model.Items.Count)
                                        {
                                            item = Model.Items[i];
                                <td>
                                   <div name='proBox' class='flower_box' style='position: relative; width: 162px!important;
                                    height: 260px!important; margin: 10px 3px 3px 0;'>
                                    <div class='cursor' name='img_proName' id='img@(item.BarcodeId)'>
                                        <a href="@Url.Action("ProductDetails", "Home", new
                                                        {
                                                            productId = @item.BarcodeId,
                                                            categoryId = Request["categoryId"],
                                                            technicalInfo = false,
                                                            isNew = Request["isNew"],
                                                            isOffer = Request["isOffer"],
                                                            isSale = Request["isSale"]
                                                        })">
                                            <img class='flowerImg cleaner' src='../Data/@(item.aspnet_Applications.ApplicationName)Photos/@(item.Barcode)/thumb_1.jpg' alt='@item.Name' title='@item.Name' style="border: none; width:150px!important;height:150px!important;"/>
                                        </a>
                                    </div>
                                    <h3 id="hFlowerName" class='name cleaner'>@item.Name کد @item.ItemCode</h3>
                                    <div class='price cleaner' id='price@(item.BarcodeId)' style ="padding:0!important;">
                                        @if (Model.HasWholeRole != true && Model.hasFriendRole != true)
                                        {
                                            if (item.IsSale == true && item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span style="text-decoration: line-through; margin-left: 5px; color: #FF0000;">
                                                @if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault() != null)
                                                {
                                                    @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Online)
                                                    <span>&nbsp;تومان</span>
                                                }
                                            </span>
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size != null && it.inv_Size.Count > 0))
                                            {
                                            <div id="price@(item.BarcodeId)" class="price" style="padding:0!important;">
                                                <span id="Qualities">
                                                    @{int counter = 1;
                                                      foreach (var size in item.inv_ItemDetail.Where(s => s.inv_Size.FirstOrDefault().inv_Size2.Size == "کیفیت"))
                                                      {
                                                        <label style="font-size: 9px!important; margin-left: 0!important; margin-right: 0!important;">
                                                            <input style="margin:0!important;" type="radio" 
                                                                value="@(Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online) + Convert.ToInt32(size.DetailPrice))" 
                                                                name="Qualities@(item.BarcodeId)" id="Quality@(counter)" sizeId="sizeId@(size.inv_Size.FirstOrDefault().SizeId)" />
                                                            @(size.inv_Size.FirstOrDefault().Size)&nbsp;</label>
                                                        counter++;
                                                      }
                                                    }
                                                </span>
                                                <br>
                                                <span id="qprice@(item.BarcodeId)" name="itemprice"></span><span>&nbsp;تومان</span>
                                            </div>
                                            }
                                        }
                                        else if (Model.HasWholeRole == true)
                                        {
                                            if (item.IsSale == true && item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span style="text-decoration: line-through; margin-left: 5px; color: #FF0000;">
                                                @if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault() != null)
                                                {
                                                    if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Wholesale > 0)
                                                    {
                                                    @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Wholesale)
                                                    <span>&nbsp;تومان</span>
                                                    }
                                                }
                                            </span>
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size != null && it.inv_Size.Count > 0))
                                            {
                                            <div id="price@(item.BarcodeId)" class="price">
                                                <span id="Qualities">
                                                    @{int counter = 1;
                                                      foreach (var size in item.inv_ItemDetail.Where(s => s.inv_Size.FirstOrDefault().inv_Size2.Size == "کیفیت"))
                                                      {
                                                        <label style="font-size: 9px!important; margin-left: 0!important; margin-right: 0!important;">
                                                            <input style="margin:0!important;" type="radio" 
                                                                value="@(Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Wholesale) + Convert.ToInt32(size.DetailPrice))" 
                                                                name="Qualities@(item.BarcodeId)" id="Quality@(counter)" sizeId="@(size.inv_Size.FirstOrDefault().SizeId)" />
                                                            @(size.inv_Size.FirstOrDefault().Size)&nbsp;</label>
                                                        counter++;
                                                      }
                                                    }
                                                </span>
                                                <br />
                                                <span id="qprice@(item.BarcodeId)" name="itemprice"></span><span>&nbsp;تومان</span>
                                            </div>
                                            }
                                        }
                                        else if (Model.hasFriendRole == true)
                                        {
                                            if (item.IsSale == true && item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                            <span style="text-decoration: line-through; margin-left: 5px; color: #FF0000;">
                                                @if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault() != null)
                                                {
                                                    if (item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Freinds > 0)
                                                    {
                                                    @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).Skip(1).Take(1).FirstOrDefault().Freinds)
                                                    <span>&nbsp;تومان</span>
                                                    }
                                                }
                                            </span>
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size == null || it.inv_Size.Count == 0))
                                            {
                                                if (item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds > 0)
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                                else
                                                {
                                            <span id="qprice@(item.BarcodeId)" name="itemprice">
                                                @Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Online)
                                            </span>
                                            <span>&nbsp;تومان</span>
                                                }
                                            }
                                            else if (item.inv_ItemDetail.Any(it => it.inv_Size != null && it.inv_Size.Count > 0))
                                            {
                                            <div id="price@(item.BarcodeId)" class="price">
                                                <span id="Qualities">
                                                    @{int counter = 1;
                                                      foreach (var size in item.inv_ItemDetail.Where(s => s.inv_Size.FirstOrDefault().inv_Size2.Size == "کیفیت"))
                                                      {
                                                        <label style="font-size: 9px!important; margin-left: 0!important; margin-right: 0!important;">
                                                            <input style="margin:0!important;" type="radio" 
                                                                value="@(Convert.ToInt32(item.inv_Price.OrderByDescending(p => p.Date).FirstOrDefault().Freinds) + Convert.ToInt32(size.DetailPrice))" 
                                                                name="Qualities@(item.BarcodeId)" id="Quality@(counter)" sizeId="@(size.inv_Size.FirstOrDefault().SizeId)" />
                                                            @(size.inv_Size.FirstOrDefault().Size)&nbsp;</label>
                                                        counter++;
                                                      }
                                                    }
                                                </span>
                                                <br />
                                                <span id="qprice@(item.BarcodeId)" name="itemprice"></span><span>&nbsp;تومان</span>
                                            </div>
                                            }
                                        }
                                    </div>
                                    <div style="margin-bottom: 10px">
                                        @if (item.inv_ItemDetail.Count > 0)
                                        {
                                            <label style="margin-left: 5px">
                                                تعداد</label>
                                            <select style="width: 50px" id="count@(item.inv_ItemDetail.FirstOrDefault().ItemDetailId)" name="countDdl">
                                                @for (int c = 0; c < 51; c++)
                                                {
                                                    <option>@c</option>
                                                }
                                            </select>
                                        }
                                    </div>
                                    @*<div class='buynow'>
                                                <span class='cursor' id='ord@(item.BarcodeId)' name='order'>&nbsp;اضافه به سبد خرید</span>
                                            </div>*@
                                </div>
                                </td>
                                        }
                            }
                        </tr>
                    </table>
                }
                <br class="cleaner">
            </div>
            <div align="center">
                <br class="clearer">
                <span style="width: 400px; color: #002F00!important; font-size: 11px; font-weight: bold">
                    گل های انتخاب شده شامل : </span><span id="subscriptionDesc" style="width: 400px">---</span>
            </div>
            @:<br class="clearer">
            <div align="center">
                <br class="clearer">
                <table class="clearer">
                    <tr>
                        <td>
                            از تاریخ :
                        </td>
                        <td>
                            <input id="txtDateFrom" type="text" style="width: 80px; direction: ltr;" />
                        </td>
                        <td style="width: 70px; text-align: left;">
                            تا تاریخ :
                        </td>
                        <td>
                            <input id="txtDateTo" type="text" style="width: 80px; direction: ltr;" />
                        </td>
                    </tr>
                </table>
                حداقل مدت اشتراک، یک ماه می باشد.
                <br class="clearer">
                <table id="tblDays" class="clearer">
                    <tr>
                        <td>
                            <input id="Saturday" type="checkbox" />
                            <label for="Saturday" style="margin-left: 15px;">
                                شنبه</label>
                        </td>
                        <td>
                            <input id="Sunday" type="checkbox" />
                            <label for="Sunday" style="margin-left: 15px;">
                                یکشنبه</label>
                        </td>
                        <td>
                            <input id="Monday" type="checkbox" />
                            <label for="Monday" style="margin-left: 15px;">
                                دوشنبه</label>
                        </td>
                        <td>
                            <input id="Tuesday" type="checkbox" />
                            <label for="Tuesday" style="margin-left: 15px;">
                                سه شنبه</label>
                        </td>
                        <td>
                            <input id="Wednesday" type="checkbox" />
                            <label for="Wednesday" style="margin-left: 15px;">
                                چهارشنبه</label>
                        </td>
                        <td>
                            <input id="Thursday" type="checkbox" />
                            <label for="Thursday" style="margin-left: 15px;">
                                پنج شنبه</label>
                        </td>
                        @* <td>
                            <input id="Friday" type="checkbox" />
                            <label for="Friday" style="margin-left: 15px;">
                                جمعه</label>
                        </td>*@
                    </tr>
                </table>
                <br class="clearer">
                <div>
                    <span style="width: 400px; color: #002F00!important; font-size: 11px; font-weight: bold">
                        تعداد روزها : </span><span id="daysCount"></span>&nbsp;روز
                </div>
                <br class="clearer">
                <div align="center">
                    <span style="width: 400px; color: #002F00!important; font-size: 11px; font-weight: bold">
                        مبلغ کل (جمع مبلغ گل ها ضرب در تعداد روزها) : </span><span style="width: 350px; color: #FF0000;
                            font-size: 16px;" id="subscriptionPrice">0</span> <span style="color: #FF0000; font-size: 14px;">
                                &nbsp;تومان&nbsp;</span>
                </div>
                <br class="clearer">
                <input type="button" id="btnSave" align="middle" class="btn btn-success" style="width: 100px;"
                    value="ثبت اشتراک" />
            </div>
        }
    </div>
</div>
